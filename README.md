 Реализация Middleware для логирования, авторизации и получения погоды в ASP.NET Core

1. Создала и зарегистрировала кастомное Middleware в [ASP.NET](http://asp.net/) Core.
2. Использовала Dependency Injection для внедрения сервисов в Middleware.
3. Реализовала многоуровневое логирование (консольное и файловое).
4. Реализовала Middleware для авторизации на основе заголовков.
5. Создала Middleware для получения информации о погоде из стороннего API.

   
1. Создание интерфейсов и сервисов
 Логирование:

- Созданы интерфейсы `ILoggingService`, `ILogger`
- Реализованы интерфейсы в классах `ConsoleLogger`, `FileLogger` и `LoggingService`.
    - Интерфейс `ILoggingService`  включает методы `LogRequest` и `LogResponse`.
    - Интерфейс `ILogger`  включает метод `Log`, который выводит сообщения.
    - Реализован класс `LoggingService`, который  использует `ILogger`  логирования запросов и ответов.
    - Класс `ConsoleLogger`  реализовывает интерфейс `ILogger` и выводит сообщения в консоль.
    - Класс `FileLogger`  реализовает интерфейс `ILogger` и записывает сообщения в файл.

 Авторизация

- Создан интерфейс `IAuthorizationService`.
- Реализован этот интерфейс в классе `AuthorizationService`.
    - Интерфейс  включает метод `Authorize`, который принимает токен и возвращает булево значение, указывающее, авторизован ли пользователь.

 Погода

- Создан интерфейс `IWeatherService`.
- Реализован этот интерфейс в классе `WeatherService`.
    - Интерфейс включает метод `GetWeatherAsync`, который принимает название города и возвращает информацию о погоде.
    - Реализация использует `HttpClient` для отправки запросов в сторонний API.

 2. Регистрация сервисов в DI контейнере

- Зарегистрируйте все сервисы под интерфейсами в `Program.cs`.

3. Создание кастомного Middleware

 Middleware для логирования

- Создан класс `LoggingMiddleware`.
    - Middleware  использует `ILoggingService` для логирования запросов и ответов.
    - Логирование  происходит до и после вызова следующего Middleware в конвейере.

 Middleware для авторизации

- Создан класс `AuthorizationMiddleware`.
    - Middleware  проверяет наличие заголовка `Authorization`.
    - Использован `IAuthorizationService` для проверки токена.
    - В случае неуспешной авторизации, Middleware  возвращает статус код 401.

 Middleware для получения погоды

- Создан класс `WeatherMiddleware`.
    - Middleware  проверяет путь запроса и метод `POST`.
    - Извлекается название города из тела запроса.
    - Используется `IWeatherService` для получения информации о погоде.
    - Возвращается ответ с информацией о погоде в формате JSON.

4. Регистрация Middleware в конвейере обработки запросов

- Зарегистрированы Middleware в `Program.cs`.
    - Регистрация должна быть в правильном порядке!

5. Тестирование

- Использовался Postman  для отправки запросов к  API.
-  все Middleware работают корректно:
    - Запросы и ответы логируются как в консоль, так и в файл.
    - Авторизация проверяется, и неавторизованные запросы получают статус код 401.
    - Информация о погоде корректно извлекается и возвращается в ответе.
